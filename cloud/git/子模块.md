## 添加子模块
添加一个远程仓库项目 `https://github.com/iphysresearch/GWToolkit.git` 子模块到一个已有主仓库项目中。代码形式是 `git submodule add <url> <repo_name>`， 如下面的例子：

```bash
cd  3rdparty # 或者在最后加上url路径名称

# 此时使用的是当前子模块的最新提交记录
git submodule add https://github.com/iphysresearch/GWToolkit.git GWToolkit

# 可以指定tag或者分支，在.gitmodules的模块描述中看到branch
git submodule add -b <branch> <url> <path>

```


这时，你会看到一个名为 `GWToolkit` 的文件夹在你的主仓库目录中。当然这个目录可以嵌套，比如`3rdparty/GWToolkit`


添加完后会仓库目录下有个submodule文件

```
[submodule "GWToolkit"] 
		path = GWToolkit 
		url = https://github.com/iphysresearch/GWToolkit.git
```


## 删除子模块
使用 git submodule deinit 命令卸载一个子模块。这个命令如果添加上参数 --force，则子模块工作区内即使有本地的修改，也会被移除

```shell
git submodule deinit GWToolkit
git rm GWToolkit

```


## 使用
```bash
# 初始化子模块
git submodule init  
# 在工程目录下获取子模块
git submodule update --init --recursive

# 或者直接在主工程clone时添加
git clone https://github.com/iphysresearch/GWToolkit.git  --recurse-submodules


# 更新子模块
git submodule update 
```


### 查看
```shell 
git submodule status

[commit id]  [libname] [tag]
ea703a7d557efd90ccae894db96368d750be93b6 lib/spacetime (6.16.3)

```

### 更新子模块版本
默认版本为当前master新提交或者由-b指定tag，如果子模块有更新需要手动更新
```shell
# 先到子模块目录 
cd 3rdparty/GWToolkit
# 获取远程仓库的更新
git fetch
git checkout newTag

# 回到主工
+程
cd ../..
git add 3rdparty/GWToolkit
git commit -m "changed submodule tag"
git push


# 在其他本地workspace必须更新子模块才能看到变化
git submodule update
git submodule status
```