### 用do while跳过部分连续逻辑，但不结束函数
在函数中一段平铺的逻辑中，依次经历1，2，3三个步骤，然后是其他逻辑（比如 4， 5）。其中1，如果失败就不执行2，2如果失败不执行3。就是逻辑中断之后直接跳到4和5。容易想到的实现思路有三：

其一：把步骤1， 2，3抽象成函数。每次判断函数的返回值，成功才调用下一个函数。OK。这样没问题。但是如果顺序逻辑太多。那么要抽成很多个函数，而且每个函数内只有寥寥几行代码。反而啰嗦。

其二：使用异常。如果是Java语言应该很习惯用异常来实现这个逻辑，把顺序逻辑封在try catch块里。每个步骤失败直接throw异常。OK，C++也可以写类似的代码。然而C++用异常隐患很多，不如Java安全，很多工程规范都竭力避免抛异常。另外就是抛异常也不是无开销的，而且这里只是逻辑中断，逻辑上也不算『异常』，通过throw异常和catch异常的方式未免更加影响表现力……

其三：goto。看过一些代码确实在这种场合使用过goto。当然我们要严厉禁止goto。这个方案直接略过。

其实还有第4种方案：do while(0)

```cpp
do {
    // 步骤1
    ...
    if (步骤1失败) {
        break;
    }
    // 步骤2
    ...
    if (步骤2失败) {
        break;
    }
    // 步骤3
    ...
    if (步骤3失败) {
        break;
    }
} while(0);

// 步骤4
...
// 步骤5
...


// 方法二
[=] {
    if (!func1()) 
        return; 

    if (!func2()) 
        return; 

    if (!func3()) 
        return; 
}();

// 步骤4
...
// 步骤5
...
```







#do while
#跳过代码块