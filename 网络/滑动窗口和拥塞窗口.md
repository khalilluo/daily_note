## 简介
 滑动窗口（Sliding window）是一种流量控制技术。早期的网络通信中，通信双方不会考虑网络的 拥挤情况直接发送数据。由于大家不知道网络拥塞状况，同时发送数据，导致中间节点阻塞掉包， 谁也发不了数据，所以就有了滑动窗口机制来解决此问题。滑动窗口协议是用来改善吞吐量的一种 技术，即容许发送方在接收任何应答之前传送附加的包。接收方告诉发送方在某一时刻能送多少包 （称窗口尺寸）。

TCP 中采用滑动窗口来进行传输控制，滑动窗口的大小意味着接收方还有多大的缓冲区可以用于 接收数据。发送方可以通过滑动窗口的大小来确定应该发送多少字节的数据。当滑动窗口为 0 时，发送方一般不能再发送数据报


## 对比滑动窗口和拥塞窗口
滑动窗口是控制接收以及同步数据范围的，通知发送端目前接收的数据范围，用于流量控制，接收端使用。拥塞窗口是控制发送速率的，避免发的过多，发送端使用。因为tcp是全双工，所以两边都有滑动窗口。两个窗口的维护是独立的，滑动窗口主要由接收方反馈缓存情况来维护，拥塞窗口主要由发送方的拥塞控制算法检测出的*网络拥塞程度*来决定的。
拥塞窗口控制sender向connection传输数据的速率，使这个速率为网络拥堵状况的函数 


wireshark中的transmission control protocol 段中的window表示窗口大小，表示的就是接收方目前能接收的缓冲区的剩余大小。但是发送方也会根据这个通告窗口的大小建立自己的滑动窗口。为了兼顾效率和可靠性，在发送方，所有未收到 ACK 的消息虽然可以发送，但是在收到 ACK 之前是一定要在缓冲区中保存的


## 拥塞窗口
![发送窗口](https://pics2.baidu.com/feed/4b90f603738da977bb9bce06f00830108718e3ce.jpeg@f_auto?token=41e8d1db9c75c8e7e6eccadf614e6287)
**滑动窗口的大小会随着发送数据和接收数据而变化**
发送窗口根据三个标准来划分：是否发送、是否收到 ACK、是否在接收方通告处理范围内，分成了四个部分。
-   第一部分就是已经发送且收到 ACK 的部分，这一块我们知道已经成功发送，所以不需要在缓冲区保留了。
-   第二部分是已发送但尚未收到 ACK 的部分。
-   第三部分是还没有发送，但是还在接收方通告窗口也就是处理范围内的数据，这块我们也可以称为可用窗口；第二、第三部分一起构成了我们的整个发送窗口。
-   最后一部分则是我们需要发送，但已经超过接收方通告窗口范围的部分，这一部分在没有收到新的 ACK 之前，发送方是不会发送这些数据的。通过这个限制，发送的数据就一定不会超过接收方的缓冲区了。

但如果发送方一直没有收到 ACK，随着数据不断被发送，很快可用窗口就会被耗尽。在这种情况下，发送方也就不会继续发送数据了，这种发送端可用窗口为零的情况我们也称为“零窗口”
![零窗口](https://pics6.baidu.com/feed/3801213fb80e7becb928bc926f7771319a506bb2.jpeg@f_auto?token=0bf01fc71b0f26541d6386717a6dc226)