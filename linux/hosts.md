### 1、名词解析

主机名：

　　无论是在局域网还是在INTERNET上，每台主机都有一个IP地址，用来区分当前是那一台机器（其实底层是使用机器的物理地址），也就是说IP地址就是一个主机的门牌号，唯一的标示这一台机子。

公网：

　　IP地址不方便记忆，所以又有了域名。域名只是在公网（INTERNET）中存在，**每个域名对应着一个IP地址，但一个IP地址可以对应多个域名**。

局域网：

　　每台机器都有一个主机名，用于主机与主机之间区别。我们可以为每一台机器设置主机名，便于以容易的方法来互相访问。比如我们在局域网中可以根据每台机的功用来为其命名。

　　用途：例如我们可以通过主机名，通过ssh命令远程得登录别人的电脑。

### 2、**关于/etc/host，主机名和IP配置文件**

 　Hosts - The static table lookup for host name（主机名查询静态表）

**用途**：

　　hosts文件是Linux系统中一个负责IP地址与域名快速解析的文件，

**存储**：

　　以ASCII格式保存在“/etc”目录下，文件名为“hosts”（不同的linux版本，这个配置文件也可能不同。比如Debian的对应文件是/etc/hostname）。

**内容**：

　　hosts文件**包含**了IP地址和主机名之间的映射，还包括主机名的别名。

**作用**：

　　在没有域名服务器的情况下，系统上的所有网络程序都通过查询该文件来解析对应于某个主机名的IP地址，否则就需要使用DNS服务程序来解决。通常可以将常用的域名和IP地址映射加入到hosts文件中，实现快速方便的访问。

### 3、优先级

 　优先级 ： dns缓存 > **hosts** > dns服务

### 4、配置hosts文件

　　这个文件可以配置主机ip及对应的主机名，对于服务器类型的linux系统其作用还是不可忽略的。在局域网或是INTERNET上，每台主机都有一个IP地址，它区分开每台主机，并可以根据ip进行通讯。但IP地址不方便记忆，所以又有了域名。在一个局域网中，每台机器都有一个主机名，用于区分主机，便于相互访问。

　　Linux主机名的相关配置文件就是/etc/hosts;这个文件告诉本主机哪些域名对应那些ip，那些主机名对应哪些ip：

　　比如文件中有这样的定义

```
192.168.1.100 linumu100 test100
```

　　假设192.168.1.100是一台网站服务器，在网页中输入http://linumu100或http://test100就会打开192.168.1.100的网页。

　　通常情况下这个文件首先记录了本机的ip和主机名：

```
127.0.0.1 localhost.localdomain localhost 
```

　　这就是在我们在调试web项目的时候，我们明明在浏览器的地址栏中输入的是localhost，他会知道我们是本地调试，因为他映射到了127.0.0.1（即本机）。

### 5、配置文件格式说明

　　但这种映射只是本地机的映射，也就是说每台机器都是独立的，只有在hosts文件中进行了配置才能使用主机名来访问。

　　在hosts文件中，我们会看到类似下面的内容

```
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4

127.0.0.1   localhost.localdomain localhost

192.168.1.195  debian.localdomain debian
```

　　一般情况下hosts的内容关于主机名(Hostname)的定义，每行为一个主机，每行由三部份组成，每个部份由空格隔开。其中**#号**开头的行做说明（即**注释**的作用），不被系统解释。

 hosts文件格式：

```
ip地址 主机名/域名 (主机别名)
```

　　第一部份：网络IP地址；

　　第二部份：主机名或域名；

　　第三部份：主机名别名；

　　当然每行也可以是两部份，即主机IP地址和主机名；比如 192.168.1.100 linmu100。

主机名(hostname)和域名(Domain）的区别：

- 主机名通常在局域网内使用，通过hosts文件，主机名就被解析到对应ip；
- 域名通常在internet上使用，但如果本机不想使用internet上的域名解析，这时就可以更改hosts文件，加入自己的域名解析。

### 6、hosts文件的用途

**6.1 解决远程登录linux主机过慢问题**

　　有时客户端想远程登录一台linux主机，但每次登录输入密码后都会等很长一段时间才会进入，这是因为linux主机在返回信息时需要解析ip，如果在linux主机的hosts文件事先加入客户端的ip地址，这时再从客户端远程登录linux就会变很快。

　　注：这里所说的远程登录不仅仅是ssh，还可能是mysql远程登录，或是文件共享的查询等。

**6.2** **双机互连**

　　当两台主机只是双机互连时，这时两台主机都需要设置自己的ip，同时在对方的hosts文件里加入自己的ip和主机名。

 7、修改主机名

其实主机名的修改也有专用工具，就是hostname

```
hostname - show or set the system’s host name
```

显示主机名：

```
# hostname

zhengcanrui
```

此主机的主机名是zhengcanrui，不加参数是用来显示当前主机的主机名；

临时设置主机名：

```
# hostname test100

# hostname 注：显示主机名

test100
```

通过hostname 工具来设置主机名只是临时的，下次重启系统时，此主机名将不会存在；

显示主机IP：

```
# hostname -i

192.168.1.100
```